machine:
  services:
    - docker
    
dependencies:
  cache_directories:
    - ~/pebble-sdk
  pre:
    - docker pull skippa/docker-pebble
    - mkdir pebble-sdk 
    - chmod g=rwx pebble-sdk
    - docker run --rm -it -v $HOME/pebble-sdk:/home/pebble/.pebble-sdk skippa/docker-pebble /bin/sh -c "yes | python /tool/pebble.py sdk install latest"
    
test:
  post:
    - cd app
    - docker run --rm -it -v $PWD:/pebble -v $HOME/pebble-sdk:/home/pebble/.pebble-sdk skippa/docker-pebble /bin/sh -c "python /tool/pebble.py build"
